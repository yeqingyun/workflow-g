<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gionee.gniflow.integration.dao.ProjectDao">
  
  <sql id="columns">
    ID, PROJECT_NAME, USER_ID, USER_NAME,STATUS,CREATETIME, CREATEBY, UPDATETIME, UPDATEBY
  </sql>

  <resultMap type="com.gionee.gniflow.biz.model.Project" id="result">
	<id property="id" column="ID"/>
	<result property="projectName" column="PROJECT_NAME"/>
	<result property="userId" column="USER_ID"/>
	<result property="userName" column="USER_NAME"/>
	<result property="createTime" column="CREATETIME"/>
	<result property="createBy" column="CREATEBY"/>
	<result property="updateTime" column="UPDATETIME"/>
	<result property="updateBy" column="UPDATEBY"/>
	<result property="status" column="STATUS"/>
  </resultMap>

  <insert id="insert" parameterType="com.gionee.gniflow.biz.model.Project">
    insert into PROJECT (<include refid="columns"/>) values (
    #{nextId},
    #{projectName},
    #{userId},
    #{userName},
    #{status},  
    #{createTime},
    #{createBy},
    #{updatetime},
    #{updateby}
    )
  </insert>

  <update id="update" parameterType="com.gionee.gniflow.biz.model.Project">
    update PROJECT
    <set>
      <if test="projectName != null">
        PROJECT_NAME = #{projectName},
      </if>
      <if test="userId != null">
        USER_ID = #{userId},
      </if>
      <if test="userName != null">
        USER_NAME = #{userName},
      </if>
      <if test="createtime != null">
        CREATETIME = #{createTime},
      </if>
      <if test="createby != null">
        CREATEBY = #{createBy},
      </if>
      <if test="updatetime != null">
        UPDATETIME = #{updateTime},
      </if>
      <if test="updateby != null">
        UPDATEBY = #{updateBy},
      </if>
      <if test="status != null">
        STATUS = #{status},
      </if>
      <if test="remark != null">
        REMARK_ = #{remark},
      </if>
    </set>
    where ID = #{id}
  </update>

  <delete id="delete" parameterType="Integer">
	delete PROJECT where ID = #{_parameter}
  </delete>

  <select id="getAll" parameterType="map" resultMap="result">
	select <include refid="columns"/> from PROJECT
	<where>
       <if test="projectName != null">
         and PROJECT_NAME like  '%'||#{projectName}||'%'
       </if>
       <if test="userId != null">
         and USER_ID = #{userId}
       </if>
       <if test="userName != null">
         and USER_NAME like  '%'||= #{userName}||'%'
       </if>
	  <if test="createtime != null">
        and CREATETIME = #{createtime}
	  </if>
	  <if test="createby != null">
        and CREATEBY = #{createby}
	  </if>
	  <if test="updatetime != null">
        and UPDATETIME = #{updatetime}
	  </if>
	  <if test="updateby != null">
        and UPDATEBY = #{updateby}
	  </if>
	</where>
  </select>

  <select id="getPage" parameterType="map" resultMap="result">
    select * from ( select a.*, ROWNUM rnum from (
      select <include refid="columns"/> from PROJECT
      <where>
        <if test="projectName != null">
          and PROJECT_NAME like  '%'||#{projectName}||'%'
        </if>
        <if test="userId != null">
          and USER_ID = #{userId}
        </if>
        <if test="userName != null">
          and USER_NAME like  '%'||= #{userName}||'%'
        </if>
        <if test="createtime != null">
          and CREATETIME = #{createtime}
        </if>
        <if test="createby != null">
          and CREATEBY = #{createby}
        </if>
        <if test="updatetime != null">
          and UPDATETIME = #{updatetime}
        </if>
        <if test="updateby != null">
          and UPDATEBY = #{updateby}
        </if>
      </where>
    ) a where ROWNUM &lt; #{lastRow}) where rnum  &gt;= #{firstRow}
  </select>
  <select id="getPageCount" parameterType="map" resultType="int">
    select count(*) from PROJECT
    <where>
        <if test="projectName != null">
          and PROJECT_NAME like  '%'||#{projectName}||'%'
        </if>
        <if test="userId != null">
          and USER_ID = #{userId}
        </if>
        <if test="userName != null">
          and USER_NAME like  '%'||= #{userName}||'%'
        </if>
      <if test="createtime != null">
        and CREATETIME = #{createtime}
      </if>
      <if test="createby != null">
        and CREATEBY = #{createby}
      </if>
      <if test="updatetime != null">
        and UPDATETIME = #{updatetime}
      </if>
      <if test="updateby != null">
        and UPDATEBY = #{updateby}
      </if>
    </where>
  </select>

  <select id="get" parameterType="Integer" resultMap="result">
	select <include refid="columns"/> from PROJECT
	where ID = #{_parameter}
  </select>
  
  
    <select id="queryItemName"  resultMap="result">
	select <include refid="columns"/> from PROJECT
	where STATUS = 0
  </select>
  
  <select id="loadAccount"  resultMap="result" parameterType="java.lang.String">
	select <include refid="columns"/> from PROJECT
	where STATUS = 0 and  PROJECT_NAME=#{name}
  </select>
</mapper>
